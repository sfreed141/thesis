\chapter{Introduction}
Computer graphics is the task of taking a virtual description of a scene, composed of objects such as models and lights, and rendering that scene to an image. One of the core components involved with this is computing realistic lighting. Although light behavior is fairly well understood in the physical sense, accurately simulating this behavior is a heavy computational task. The goal in computer graphics, then, is how to efficiently approximate light behavior where there are time and resources constraints.

% TODO paragraph or subsection about raytracing/offline gi somewhere?

Of particular importance in computer graphics are real-time applications, where images, or frames, must be produced at an interactive speed, such as video games. Typically, the lower bound for this is considered 30 frames per second, or about 33 milliseconds per frame (although 60 fps is generally considered a better target). To meet this goal, researchers and engineers have designed many algorithms and techniques.
% TODO reword
In this work, we implement and extend an algorithm to accomplish fast and accurate lighting for fully dynamic scenes.

% TODO seems like a good thing to note (it's very engineer-y)
It is important to keep in mind that most lighting algorithms have many tradeoffs and are adapted towards specific use cases. A complete lighting system may also combine many different lighting algorithms in order to achieve the desired balance between quality, performance, and ease of use.

% TODO example of global illumination (with/without). Possibly from my program.
\missingfigure{Scene rendered with/without global illumination.}
% \begin{figure}[h]
% \centering
% \includegraphics[scale=1.0]{TODO}
% \caption{A scene---describing information like light sources, materials, and geometry---is rendered by computing a color for each pixel of a screen. The image on the left is rendered with global illumination whereas the image on the right is not.}
% \label{fig:introduction_gi}
% \end{figure}

\section{Real-Time Global Illumination}
In general, lighting at a given point is a combination of direct and indrect light. Direct light is light accumulated directly from a light source, whereas indirect light is the light that comes from other non-light sources in the scene (e.g.\ the light that has `bounced' off of objects in the scene).

% TODO ambient occlusion: footnote with citations for a few types (SSAO, HBAO, etc.)
% TODO cite specific sections of book howdo?
In the beginnings of computer graphics very simple lighting models were used in order to maintain real-time performance. While the direct light was feasible to compute in real-time (albeit with limitations on number of lights and other optimizations), indirect lighting was often faked with a simple constant contribution. As hardware limitations and algorithms improved, more advanced techniques were developed and approximating the indirect light became more feasible. Two methods, ambient occlusion~\cite{bunnell2005dynamic,moller2008rtr} and baked lighting~\cite{Sloan:2002:PRT:566654.566612,moller2008rtr}, became standard ways of introducing simple global illumination, the term given to techniques that improved indirect lighting. However both these methods have drawbacks. Ambient occlusion, which approximates the effect of light occlusion by nearby objects, provides a great improvement over the constant ambient term used previously but does not accurately simulate the indirect light in its entirety. Thus it is only `partial' global illumination. Baked lighting involves pre-computing light behavior of a scene prior to runtime and then utilizing the precomputation to enable real-time realistic lighting. The drawback here is only static objects can have their light baked---any dynamic objects or lights in the scene are not accounted for.

% TODO reword
Full global illumination algorithms attempt to provide a complete approximation of indirect light. Some, like baked lighting, only work for static scenes. For our work, however, we are interested in dynamic global illumination. In other words, our goal is full global illumination that can be performed completely for each frame. Any changes in the scene---object movement, light movement or changes in intensity---will be accounted for.

For dynamic real-time global illumination, a common approach is to first construct a spatial representation of a scene's radiance (light information) and then use that representation to approximate the radiance at a given point in the scene. Popular methods that follow this approach are light propagation volumes~\cite{Kaplanyan:2010:CLP:1730804.1730821} and voxel cone tracing~\cite{crassin2011interactive} (see Related Works for more). Some challenges that arise from methods like these are issues with GPU memory consumption and achieving adequate lighting detail. % TODO expand on these problems more?

\section{Our Contribution}
% TODO should I put results here too?
The main contribution of this work is a novel way of computing global illumination based on voxel cone tracing with a focus on ease of use and speed while still producing high quality results. We hope this provides a competitive alternative to existing real-time global illumination systems. The novel contribution, voxel warping, is a way to handle large scenes in a memory efficient and simple way. The idea is to adjust the voxel density of the scene based on its distance from the camera, which allows a large scene to be represented without requiring large memory or performance overheads.

% TODO fact check and citations needed
Another important part of our contribution is that the implementation is open-source (under the MIT license) and cross platform (on Linux and Windows using modern OpenGL~\footnote{macOS is not supported since Apple only supports up to OpenGL 4.1~\cite{appleopenglsupport}, whereas we require 4.5 (for features like compute shaders, direct state access, and image objects).}. Many graphics implementations are developed in the research or industrial space and are oftentimes not made available to the public for various reasons (e.g.\ copyright). Even implementations that are openly available often are tied to a specific game engine or other large codebase\footnote{For example, NVIDIA's VXGI is integrated into a custom branch of Unreal Engine 4 (distributed as a binary)~\cite{nvidiavxgi} and Light Propogation Volumes are implemented in CryEngine3~\cite{kaplanyan2009light}. The Godot engine~\cite{godotengine} is a notable exception here and, while part of a large codebase, is relatively small and is completely open source.}, making it difficult to understand or integrate into one's own project. Furthermore, many implementations utilize DirectX as their graphics API, which limits the implementation to Windows only. We hope that providing an easy to understand and cross platform implementation will help others learn more about voxel cone tracing and dynamic real-time global illumination.

\iffalse
% old intro
Computing realistic lighting in virtual applications is an ongoing issue in computer graphics. In general, lighting at a given point is a combination of direct and indirect light. Direct light is light accumulated directly from a light source and is straightforward to compute. Indirect light is the light that comes from other non-light sources in the scene (i.e.\ the light that has `bounced' off of objects in the scene). Another term for this is global illumination, as it is the light that comes from anything in the scene. Global illumination is extremely expensive to compute in real time. The theoretical solution to the radiance of a particular point, given by Kajiya~\cite{kajiya1986rendering}, is essentially an accumulation of incoming light coming from all possible directions (i.e.\ a surface integral over a hemisphere). Performing this integral accurately is not feasible under real-time constraints and thus it must be approximated.

Many approaches on how to accurately and efficiently compute global illumination exist. Ray tracing is one popular approach, which involves sending rays out into the scene and sampling direct and indirect lighting. However, ray tracing in general is not fast enough when applied to real-time applications such as games. For real-time global illumination, a common approach is to first construct a spatial representation of a scene's radiance. This can then be used to approximate the radiance at a given point in the scene. Popular methods that follow this approach are baked lighting~\cite{Sloan:2002:PRT:566654.566612}, light propagation volumes~\cite{Kaplanyan:2010:CLP:1730804.1730821}, and voxel cone tracing~\cite{crassin2011interactive}. The advantage of baked lighting is the radiance is all pre-processed once prior to runtime. The obvious disadvantage is it does not capture dynamic movement within the scene---an important part of any interactive application. Light propagation volumes are able to produce good results for dynamic scenes but suffer from issues with light bleeding. Voxel cone tracing also produces good results for dynamic scenes but has similar issues with light bleeding.

For this paper, a new technique based on voxel cone tracing will be developed. The general voxel cone tracing algorithm relies on approximating the scene's radiance using a voxelized spatial data structure, which then upscales (filters) the radiance in order to obtain adequate performance. To perform the actual lighting calculation, the radiance is sampled from the spatial data structure in such a way to minimize the amount of sampling without sacrificing quality. NVIDIA's implementation, VXGI, is a slightly modified version of the algorithm as stated in the original paper that uses clipmaps instead of octrees for the voxelized radiance values~\cite{nvidiavxgi}. VXGI has been incorporated into Unreal Engine. The idea has also been adapted and implemented in the PS4 game \textit{The Tomorrow Children}~\cite{mclaren2016cascaded}.  Unfortunately there are still issues regarding GPU memory consumption, inaccurate specular reflections, and light bleeding. In this paper, different approaches to parts of voxel cone tracing will be explored in order to find desirable tradeoffs in terms of lighting quality, performance, and memory usage. One specific area investigated will be experimenting with the data structure and filtering used in voxelizing the scene. Other promising directions are alternate radiance representations, temporal coherency, and adapting visibility techniques similar to those used in~\cite{McGuire:2017:RGI:3023368.3023378} in order to alleviate light bleeding.

The main contribution of this paper will be a novel way of computing global illumination based on voxel cone tracing. This method will focus on a new way of representing radiance in a given scene. The goal is on ease of use and speed while still producing high quality results. We hope this will provide a competitive alternative to existing real-time global illumination systems.
\fi